pipeline{
  agent any
  environment {
    GOPATH = "${env.WORKSPACE}/go"
  }
  tools {
    go 'go1.22.4'
  }
  stages{
    stage('Build'){
      steps{
        echo 'go1.22.4 build'
        sh 'go env -w GOOS=darwin GOARCH=amd64'
        sh 'go build -o jenkins-pipeline'
      }
    }
  }
  post{
    always{
      archiveArtifacts artifacts:'jenkins-pipeline',fingerprint:true,onlyIfSuccessful:true
    }
  }
}
